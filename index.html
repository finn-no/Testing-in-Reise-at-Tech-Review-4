<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>testing-in-reise</title>

    <meta name="description" content="Presentation on how FINN Reise does testing held at FINN Tech Review #4 2016.06.09">
    <meta name="author" content="Stig Kleppe-Jørgensen">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/simple.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/highlight/styles/zenburn.css" id="highlight-theme">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <link rel="stylesheet" href="css/extra.css">

  </head>

  <body>

    <div class="reveal">
      <div class="slides"><section id="testing-in-reise" class="slide" data-has-notes="true">
<h1>Testing @ FINN Reise</h1><h4>Solfrid Wathne &amp; Stig Kleppe-Jørgensen</h4><h4>2016.06.09</h4>
</section>

<section id="why-1" class="slide" data-has-notes="true">
<h1>Why</h1><h2>or, what&#39;s in it for me?</h2><aside class="notes"><p>Hva får en ved å teste slik vi gjør i Reise?</p></aside>
</section>

<section id="why-2" class="slide" data-has-notes="false">
<h1>Why</h1><h3>Unstable test environments, you say?</h3><h3>Never heard of&#39;em</h3>
</section>

<section id="why-3" class="slide" data-has-notes="true">
<h1>Why</h1><ul>
<li>Deploy <strong>faster</strong> &amp; <strong>safer</strong></li>
<li>PR NG --&gt; no PRs --&gt; Code reviews after deployment</li>
<li>Push directly to master</li>
<li>Auto verify in pipeline</li>
<li>Safe to do large changes<ul>
<li>If tests go green everything works</li>
</ul>
</li>
</ul><aside class="notes"><p>Vi kan pushe rett til master
Vi kan ha på auto verify i pipeline
Det er trygt å gjøre større endringer som treffer flere moduler.</p></aside>
</section>

<section id="how-1" class="slide" data-has-notes="true">
<h1>How?</h1><h2>or, TDD FTW</h2><aside class="notes"><p>Den viktigste grunnen til at vi kan gjøre dette, er at vi har kjørt TDD hele veien. Når det lages en ny feature, lager vi ende-til-ende-testen først før vi skriver noe funksjonell kode.</p></aside>
</section>

<section id="how-2" class="slide" data-has-notes="true">
<h1>How?</h1><h3>EVERYTHING is tested</h3><h3>The build runs EVERYTHING</h3><h3>NO manual testing</h3><aside class="notes"><p>Vi tester alt, bygget kjører alle tester og vi har ikke noe manuell testing.</p></aside>
</section>

<section id="how-3" class="slide" data-has-notes="true">
<h1>How?</h1><h3>Multiple levels, or strategies, of tests</h3><p>Martin Fowler&#39;s test pyramid:</p>
<image src="images/test-pyramid.svg" style="background:none; border:none; box-shadow:none;"/><aside class="notes"><p>For å få en så høy test-dekning som mulig, har vi tester på forskjellige nivåer. Som vist i test-pyramiden her, hentet fra Martin Fowler, blir det færre tester jo lenger opp en kommer. Grunnen til dette er at jo lenger opp en kommer, jo lenger tar testene å kjøre i tillegg til at de blir mer ustabile.</p></aside>
</section>

<section id="how-4" class="slide" data-has-notes="true">
<h1>How?</h1><h3>Multiple levels, or strategies, of tests</h3><p>FINN Reise&#39;s test pyramid:</p>
<image src="images/test-pyramid-reise.svg" style="background:none; border:none; box-shadow:none;"/><aside class="notes"><p>Vi har litt andre navn på våre test-nivåer, feature i stedetfor end-to-end, module i stedetfor component. Våre unit tester er for det meste det samme, men vi har også noen på unit test-nivå som kan klassifiseres som integration-tester.</p></aside>
</section>

<section id="feature-tests" class="slide" data-has-notes="true">
<h1>Feature tests</h1><ul>
<li>End-2-end testing</li>
<li>Starts the whole vertical<ul>
<li>web, api, integration, solr, etc.</li>
</ul>
</li>
<li>The tests emulate a user</li>
<li>Mocks out external services<ul>
<li>Expedia, SAS, Star Tour, Ving, etc.</li>
</ul>
</li>
</ul><aside class="notes"><ul>
<li>fill out fields<ul>
<li>click links</li>
<li>check page elements</li>
</ul>
</li>
</ul></aside>
</section>

<section id="module-tests" class="slide" data-has-notes="true">
<h1>Module tests</h1><ul>
<li>Starts only 1 module<ul>
<li>web or api or...</li>
</ul>
</li>
<li>2 ways of testing<ul>
<li>web modules --&gt; emulate a user</li>
<li>other modules --&gt; call the API</li>
</ul>
</li>
<li>Mocks out<ul>
<li>other modules</li>
<li>external services</li>
</ul>
</li>
</ul>
</section>

<section id="tools-frameworks-1" class="slide" data-has-notes="true">
<h2>Tools &amp; frameworks</h2><ul>
<li>Geb</li>
<li>Spock</li>
<li>Karma</li>
<li>BrowserStack</li>
<li>HTTP mocking</li>
<li>Embedded Tomcat</li>
</ul><aside class="notes"><p>Geb brukes til frontend testing, dvs. emulere en bruker. Vi bruker det sammen med Spock, som gir konsise og lett-leste test-kode.</p></aside>
</section>

<section id="tools-frameworks-2" class="slide" data-has-notes="true">
<h2>Tools &amp; frameworks</h2><ul>
<li>PMD</li>
<li>Checkstyle</li>
<li>FindBugs</li>
<li>CodeNarc</li>
<li>Jasper</li>
<li>Gradle</li>
</ul><aside class="notes"><p>Vi kjører også kodesjekker i bygget, og sjekker både prod og testkode med de samme reglene. Testkoden skal alltid holde like høy kvalitet som prod-koden! Vi tester også at JSPene kompilerer ok. Og sist men ikke minst, Gradle. Det hadde vært veldig tungt å skulle satt opp dette test-regimet med Maven.</p></aside>
</section>

<section id="geb-spock" class="slide" data-has-notes="true">
<h1>Geb and Spock</h1><pre><code class="lang-groovy"><span class="hljs-keyword">def</span> <span class="hljs-string">'Enter credentials and login'</span>() {
<span class="hljs-symbol">  given:</span>
    at LoginPage
    <span class="hljs-keyword">def</span> uid = System.getenv(<span class="hljs-string">'FINN_UID'</span>)
    <span class="hljs-keyword">def</span> pwd = System.getenv(<span class="hljs-string">'FINN_PWD'</span>)
<span class="hljs-symbol">
  when:</span>
    email.value(uid)
    password.value(pwd)
    loginWithSPiD.click()
<span class="hljs-symbol">
  then:</span>
    at UserPage
}
</code></pre>
</section>

<section id="work-with-us" class="slide" data-has-notes="true">
<h2>Come work with us!</h2><aside class="notes"><p>Hvis det nå er noen som vil lære mer om hvordan vi gjør testing, er det bare å spørre nærmere sjef om å få lov til å hospitere hos oss!</p></aside>
</section></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: Reveal.getQueryHash().transition || 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
    </script>

    <script src="js/dynamic-theme.js"></script><script src="js/such-notes-print.js"></script>

  </body>
</html>
